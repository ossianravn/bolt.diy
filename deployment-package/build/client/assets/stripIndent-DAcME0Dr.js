import{r as L}from"./components-BUtF2obd.js";let a=[],p=(t,e)=>{let r=[],o={get(){return o.lc||o.listen(()=>{})(),o.value},l:e||0,lc:0,listen(n,c){return o.lc=r.push(n,c||o.l)/2,()=>{let s=r.indexOf(n);~s&&(r.splice(s,2),--o.lc||o.off())}},notify(n,c){let s=!a.length;for(let i=0;i<r.length;i+=2)a.push(r[i],r[i+1],o.value,n,c);if(s){for(let i=0;i<a.length;i+=5){let l;for(let d=i+1;!l&&(d+=5)<a.length;)a[d]<a[i+1]&&(l=a.push(a[i],a[i+1],a[i+2],a[i+3],a[i+4]));l||a[i](a[i+2],a[i+3],a[i+4])}a.length=0}},off(){},set(n){let c=o.value;c!==n&&(o.value=n,o.notify(c))},subscribe(n,c){let s=o.listen(n,c);return n(o.value),s},value:t};return o};function D(t,e,r){let o=new Set([...e,void 0]);return t.listen((n,c,s)=>{o.has(s)&&r(n,c,s)})}let k=(t={})=>{let e=p(t);return e.setKey=function(r,o){let n=e.value;typeof o>"u"&&r in e.value?(e.value={...e.value},delete e.value[r],e.notify(n,r)):e.value[r]!==o&&(e.value={...e.value,[r]:o},e.notify(n,r))},e};function M(t,e={}){let r=L.useCallback(n=>e.keys?D(t,e.keys,n):t.listen(n),[e.keys,t]),o=t.get.bind(t);return L.useSyncExternalStore(r,o,o)}/*! js-cookie v3.0.5 | MIT */function h(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)t[o]=r[o]}return t}var $={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function m(t,e){function r(n,c,s){if(!(typeof document>"u")){s=h({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in s)s[l]&&(i+="; "+l,s[l]!==!0&&(i+="="+s[l].split(";")[0]));return document.cookie=n+"="+t.write(c,n)+i}}function o(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var c=document.cookie?document.cookie.split("; "):[],s={},i=0;i<c.length;i++){var l=c[i].split("="),d=l.slice(1).join("=");try{var g=decodeURIComponent(l[0]);if(s[g]=t.read(d,g),n===g)break}catch{}}return n?s[n]:s}}return Object.create({set:r,get:o,remove:function(n,c){r(n,"",h({},c,{expires:-1}))},withAttributes:function(n){return m(this.converter,h({},this.attributes,n))},withConverter:function(n){return m(h({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var v=m($,{path:"/"});let C="debug";const O="HTMLRewriter"in globalThis,I=!O,J={trace:(...t)=>u("trace",void 0,t),debug:(...t)=>u("debug",void 0,t),info:(...t)=>u("info",void 0,t),warn:(...t)=>u("warn",void 0,t),error:(...t)=>u("error",void 0,t),setLevel:T};function _(t){return{trace:(...e)=>u("trace",t,e),debug:(...e)=>u("debug",t,e),info:(...e)=>u("info",t,e),warn:(...e)=>u("warn",t,e),error:(...e)=>u("error",t,e),setLevel:T}}function T(t){t==="trace"||t==="debug"||(C=t)}function u(t,e,r){const o=["trace","debug","info","warn","error"];if(o.indexOf(t)<o.indexOf(C))return;const n=r.reduce((g,f)=>g.endsWith(`
`)?g+f:g?`${g} ${f}`:f,"");if(!I){console.log(`[${t.toUpperCase()}]`,n);return}const c=E(t),i=w(c,t==="warn"?"black":"white"),l=w("#77828D","white"),d=[i];typeof e=="string"&&d.push("",l),console.log(`%c${t.toUpperCase()}${e?`%c %c${e}`:""}`,...d,n)}function w(t,e){return`background-color: ${t}; color: white; border: 4px solid ${t}; color: ${e};`}function E(t){switch(t){case"trace":case"debug":return"#77828D";case"info":return"#1389FD";case"warn":return"#FFDB6C";case"error":return"#EE4744";default:return"black"}}const K=_("Render"),U=_("LogStore"),b=1e3;class j{_logs=k({});showLogs=p(!0);constructor(){this._loadLogs()}_loadLogs(){const e=v.get("eventLogs");if(e)try{const r=JSON.parse(e);this._logs.set(r)}catch(r){U.error("Failed to parse logs from cookies:",r)}}_saveLogs(){const e=this._logs.get();v.set("eventLogs",JSON.stringify(e))}_generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_trimLogs(){const e=Object.entries(this._logs.get());if(e.length>b){const r=e.sort(([,n],[,c])=>new Date(c.timestamp).getTime()-new Date(n.timestamp).getTime()),o=Object.fromEntries(r.slice(0,b));this._logs.set(o)}}addLog(e,r="info",o="system",n){const c=this._generateId(),s={id:c,timestamp:new Date().toISOString(),level:r,message:e,details:n,category:o};return this._logs.setKey(c,s),this._trimLogs(),this._saveLogs(),c}logSystem(e,r){return this.addLog(e,"info","system",r)}logProvider(e,r){return this.addLog(e,"info","provider",r)}logUserAction(e,r){return this.addLog(e,"info","user",r)}logError(e,r,o){const n={...o||{},error:r instanceof Error?{message:r.message,stack:r.stack}:r};return this.addLog(e,"error","error",n)}logWarning(e,r){return this.addLog(e,"warning","system",r)}logDebug(e,r){return this.addLog(e,"debug","system",r)}clearLogs(){this._logs.set({}),this._saveLogs()}getLogs(){return Object.values(this._logs.get()).sort((e,r)=>new Date(r.timestamp).getTime()-new Date(e.timestamp).getTime())}getFilteredLogs(e,r,o){return this.getLogs().filter(n=>{const c=!e||e==="debug"||n.level===e,s=!r||n.category===r,i=!o||n.message.toLowerCase().includes(o.toLowerCase())||JSON.stringify(n.details).toLowerCase().includes(o.toLowerCase());return c&&s&&i})}}const F=new j,x="bolt_theme",A="light",S=p(R());function R(){{const t=localStorage.getItem(x),e=document.querySelector("html")?.getAttribute("data-theme");return t??e??A}}function W(){const e=S.get()==="dark"?"light":"dark";S.set(e),F.logSystem(`Theme changed to ${e} mode`),localStorage.setItem(x,e),document.querySelector("html")?.setAttribute("data-theme",e)}function q(t,...e){if(typeof t!="string"){const r=t.reduce((o,n,c)=>(o+=n+(e[c]??""),o),"");return y(r)}return y(t)}function y(t){return t.split(`
`).map(e=>e.trim()).join(`
`).trimStart().replace(/[\r\n]$/,"")}export{p as a,W as b,_ as c,v as d,J as e,F as l,k as m,K as r,q as s,S as t,M as u};
